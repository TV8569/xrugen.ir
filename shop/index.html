<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>X‑Rugen — فروشگاه</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600;800;900&display=swap" rel="stylesheet">
  <link href="https://cdn.fontcdn.ir/Font/Persian/YekanBakh:400:800:900" rel="stylesheet">
  <link href="https://fonts.cdnfonts.com/css/minecraft-4" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="icon" href="https://s5.uupload.ir/files/amirabbas8585/Xrugen/logo.png" type="image/png" />
  <style>
    /* ===== متغیره‌های اصلی و استایل پایه ===== */
    :root{
      /* پالت رنگی جدید با گرادیانت‌های آبی نفتی و روشن */
      --primary: #1e88e5;
      --primary-2: #42a5f5;
      --primary-3: #0d47a1;
      --accent: #ffb62f;
      --accent-2: #ffc857;
      --accent-3: #e69a00;
      --bg: #0d1e35; /* آبی نفتی تیره */
      --bg-2: #142742; /* آبی نفتی متوسط */
      --bg-3: #223c68; /* آبی نفتی روشن */
      --glass: rgba(13, 30, 53, .65); /* نسخه شفاف پس‌زمینه */
      --text: #e9eef3;
      --muted: #bcd0e0;
      --danger: #ef5350;
      --success: #26c281;
      --border: rgba(255, 255, 255, .1);
      
      /* گرادیانت‌های اصلی (از index.html) */
      --grad-bg: radial-gradient(circle at 50% 120%, rgba(3, 21, 58, 1) 0%, rgba(3, 21, 58, 0) 100%), linear-gradient(to bottom, #0d1e35, #0a1727);
      --grad-topbar: linear-gradient(90deg, #0e1d30, #16243b);
      --grad-footer: linear-gradient(180deg, #0e1d30, #16243b);

      /* متغیرهای خاص فروشگاه، حفظ شده‌اند */
      --shadow: 0 10px 30px rgba(0,0,0,0.5);
      --ore-purple: #5f03f4;
      --emerald-green: #4aba27;
      --gold-yellow: #ffb62f;
      --redstone-red: #ff5252;
      --dirt-brown: #866043;
      --stone-gray: #7b7b7b;
      --obsidian: #150d1a;
    }

    /* استایل‌های پایه برای بدنه صفحه */
    html {
      scroll-behavior: smooth;
      box-sizing: border-box;
      font-size: 16px;
      background: var(--grad-bg);
      color: var(--text);
      font-family: 'Vazirmatn', sans-serif;
      direction: rtl;
    }
    *, *::before, *::after {
      box-sizing: inherit;
    }
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
      background: var(--grad-bg);
    }
    a {
      color: inherit;
      text-decoration: none;
    }
    img {
      max-width: 100%;
      height: auto;
      image-rendering: pixelated;
      display: block;
    }
    h1, h2, h3, h4, h5, h6 {
      margin: 0;
      font-family: 'Vazirmatn', sans-serif;
    }
    p {
      margin: 0;
    }

    /* اسکرول بار */
    ::-webkit-scrollbar {
      width: 10px;
      background: var(--bg-2);
    }
    ::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 4px;
      box-shadow: inset 0 0 4px rgba(0,0,0,0.3);
    }
    ::-webkit-scrollbar-thumb:hover {
      background: var(--primary-2);
      box-shadow: 0 0 4px var(--primary-2);
    }

    /* ===== استایل‌های Preloader ===== */
    #preloader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg);
      z-index: 9999;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      opacity: 1;
      visibility: visible;
      transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
    }
    #preloader.hide {
      opacity: 0;
      visibility: hidden;
    }
    .loading-logo {
      width: 80px;
      height: 80px;
      animation: bounce 1.5s infinite ease-in-out;
      image-rendering: pixelated;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(255,255,255,0.3);
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-top: 20px;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ===== استایل‌های پس‌زمینه ذرات (Particles) ===== */
    .particle-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
      opacity: 0.9;
    }
    #particleCanvas {
      width: 100%;
      height: 100%;
      display: block;
    }
    /* Cursor Particle Canvas */
    #cursorCanvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 9999;
      pointer-events: none;
    }

    /* ===== استایل‌های هدر و ناوبری ===== */
    .topbar {
      background: var(--grad-topbar);
      backdrop-filter: blur(10px);
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 100;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
      border-bottom: 1px solid var(--border);
    }
    .topbar-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      font-family: 'Minecraft', sans-serif;
      font-weight: 800;
      font-size: 1.4rem; /* کوچک شدن فونت */
      color: var(--primary);
      text-shadow: 0 0 6px rgba(30,136,229,0.7);
      user-select: none;
    }
    .brand img {
      width: 55px; /* بزرگ‌تر شدن لوگو */
      height: 55px; /* بزرگ‌تر شدن لوگو */
      border-radius: 10px;
      border: 2px solid rgba(66,165,245,0.4);
      image-rendering: pixelated;
      box-shadow: 0 0 15px rgba(30,136,229,0.5);
      transition: transform 0.3s ease;
    }
    @keyframes wobble {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(5deg); }
      75% { transform: rotate(-5deg); }
    }
    .brand:hover img {
      animation: wobble 0.6s ease-in-out;
      box-shadow: 0 0 25px rgba(30,136,229,0.8);
    }
    .brand .name {
      color: var(--text);
      text-shadow: 0 0 2px rgba(0,0,0,0.7);
    }
    .brand .name .x {
      color: var(--primary);
      text-shadow: 0 0 8px var(--primary);
    }
    #nav {
      display: flex;
      gap: 16px;
      align-items: center;
    }
    .nav-link {
      font-weight: 700;
      font-size: 1.1rem;
      padding: 8px 14px;
      border-radius: 12px;
      color: var(--text);
      position: relative;
      transition: all 0.3s ease;
      text-shadow: 0 0 2px rgba(0,0,0,0.7);
    }
    .nav-link:hover {
      color: var(--accent);
      box-shadow: 0 0 10px var(--accent);
      border: 1px solid var(--accent);
      background: rgba(255, 182, 47, 0.15);
    }
    .nav-link.active::after {
      content: "";
      position: absolute;
      bottom: 4px;
      left: 10%;
      width: 80%;
      height: 3px;
      background: var(--accent);
      opacity: 1;
      transition: opacity 0.3s ease;
      border-radius: 2px;
    }
    .menu-btn {
      display: none;
      background: transparent;
      border: none;
      color: var(--text);
      font-size: 1.5rem;
      cursor: pointer;
    }

    /* ===== استایل‌های بخش اصلی صفحه فروشگاه ===== */
    main {
      padding: 96px 0 48px;
    }

    .shop-header {
      margin-top: 24px;
      padding: 48px 20px 40px;
      text-align: center;
      position: relative;
      background: var(--bg-2);
      border-radius: 20px;
      box-shadow: 0 0 25px rgba(30,136,229,0.3);
      user-select: none;
      max-width: 900px;
      margin: 96px auto 60px;
      transform: translateY(20px);
      opacity: 0;
      transition: opacity 0.8s ease, transform 0.8s ease, box-shadow 0.4s ease;
      overflow: hidden;
    }
    .shop-header.visible {
      opacity: 1;
      transform: translateY(0);
    }
    .shop-header::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.05) 50%,
        rgba(255, 255, 255, 0) 100%
      );
      transform: translateX(-100%);
      transition: transform 0.8s ease-in-out;
      pointer-events: none;
    }
    .shop-header:hover::before {
      transform: translateX(100%);
    }
    
    .shop-header h1 {
      font-family: 'Minecraft', sans-serif;
      font-weight: 900;
      font-size: 3.2rem;
      color: var(--accent);
      text-shadow:
        2px 2px 0 #000,
        0 0 10px var(--accent);
      margin-bottom: 12px;
      transition: text-shadow 0.4s ease, color 0.4s ease;
    }
    .shop-header:hover h1 {
      text-shadow:
        2px 2px 0 #000,
        0 0 20px var(--accent),
        0 0 30px var(--accent);
    }
    .shop-header p {
      font-size: 1.25rem;
      color: var(--text);
      max-width: 720px;
      margin: 0 auto;
      line-height: 1.5;
      user-select: text;
      transition: color 0.4s ease;
    }
    .shop-header:hover p {
        color: var(--primary);
    }

    /* Keyframe for subtle container glow */
    @keyframes container-glow {
      0% { box-shadow: 0 0 25px rgba(30, 136, 229, 0.3); }
      50% { box-shadow: 0 0 40px rgba(30, 136, 229, 0.6); }
      100% { box-shadow: 0 0 25px rgba(30, 136, 229, 0.3); }
    }

    /* کانتینر جدید برای کل بخش کارت‌ها با استایل مشابه shop-header */
    .ranks-container {
      position: relative;
      background: var(--bg-2);
      border-radius: 20px;
      box-shadow: 0 0 25px rgba(30,136,229,0.3);
      max-width: 1500px; /* بزرگ‌تر شدن کادر برای جا دادن انیمیشن */
      margin: 80px auto;
      padding: 60px 40px; /* افزایش فضای داخلی */
      transform: translateY(20px);
      opacity: 0;
      transition: opacity 0.8s ease, transform 0.8s ease;
      overflow: hidden;
      animation: container-glow 4s infinite ease-in-out; /* اضافه شدن انیمیشن پالس */
    }
    .ranks-container.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .ranks-grid {
      display: flex;
      flex-wrap: nowrap;
      justify-content: center;
      gap: 32px;
      padding: 0;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      margin: 0;
    }
    
    .ranks-grid::-webkit-scrollbar {
      display: none;
    }

    .rank-card {
      background: linear-gradient(180deg, var(--glass), rgba(20,28,36,.6));
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 28px 24px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.03), 0 20px 40px rgba(0,0,0,.25);
      color: var(--text);
      display: flex;
      flex-direction: column;
      align-items: center;
      user-select: none;
      position: relative;
      transition: box-shadow .4s cubic-bezier(0.25, 0.46, 0.45, 0.94), background .4s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color .4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      cursor: default;
      flex-shrink: 0;
      width: 280px;
      min-width: 280px;
      backdrop-filter: blur(8px);
      transform-style: preserve-3d;
      z-index: 1; /* Default z-index */
    }
    /* بهبود انیمیشن هاور کارت و فیکس مشکل زیر رفتن */
    .rank-card:hover {
      box-shadow: 
        0 25px 50px rgba(0,0,0,0.8), 
        0 0 20px var(--primary-2),
        0 0 40px rgba(66, 165, 245, 0.5); /* بهبود نورپردازی */
      background: linear-gradient(180deg, rgba(20,28,36,0.95), rgba(20,28,36,0.8));
      border-color: var(--primary-2);
      z-index: 10;
    }
    .rank-card.hero { border-color: var(--emerald-green); }
    .rank-card.hellborn { border-color: var(--redstone-red); }
    .rank-card.champions { border-color: var(--gold-yellow); }
    .rank-card.empire { border-color: var(--ore-purple); }

    .rank-icon {
      width: 160px;
      height: 160px;
      margin-bottom: 20px;
      position: relative;
      filter: drop-shadow(0 0 8px rgba(0,0,0,0.6));
      transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), filter 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    /* بهبود انیمیشن هاور آیکون */
    .rank-card:hover .rank-icon {
      transform: scale(1.15) rotate(5deg);
      filter: drop-shadow(0 0 30px var(--accent));
    }
    .rank-icon img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      image-rendering: pixelated;
    }
    .rank-card.hero .rank-icon { color: var(--emerald-green); text-shadow: 2px 2px 0 #000, 0 0 10px var(--emerald-green); }
    .rank-card.hellborn .rank-icon { color: var(--redstone-red); text-shadow: 2px 2px 0 #000, 0 0 10px var(--redstone-red); }
    .rank-card.champions .rank-icon { color: var(--gold-yellow); text-shadow: 2px 2px 0 #000, 0 0 10px var(--gold-yellow); }
    .rank-card.empire .rank-icon { color: var(--ore-purple); text-shadow: 2px 2px 0 #000, 0 0 10px var(--ore-purple); }

    .rank-title {
      font-family: 'Minecraft', sans-serif;
      font-weight: 900;
      font-size: 2.2rem;
      margin-bottom: 8px;
      text-shadow: 2px 2px 0 #000, 0 0 12px var(--accent);
      color: var(--accent);
      transition: color 0.3s ease, text-shadow 0.3s ease;
    }
    .rank-card.hero .rank-title { color: var(--emerald-green); text-shadow: 2px 2px 0 #000, 0 0 10px var(--emerald-green); }
    .rank-card.hellborn .rank-title { color: var(--redstone-red); text-shadow: 2px 2px 0 #000, 0 0 10px var(--redstone-red); }
    .rank-card.champions .rank-title { color: var(--gold-yellow); text-shadow: 2px 2px 0 #000, 0 0 10px var(--gold-yellow); }
    .rank-card.empire .rank-title { color: var(--ore-purple); text-shadow: 2px 2px 0 #000, 0 0 10px var(--ore-purple); }

    .rank-price {
      font-weight: 700;
      font-size: 1.3rem;
      margin-bottom: 16px;
      color: var(--text);
      text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
    }

    .rank-benefits {
      list-style: none;
      padding: 0;
      margin: 0 0 24px;
      width: 100%;
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: max-height 0.5s ease, opacity 0.5s ease;
      text-align: right;
      user-select: text;
    }
    .rank-benefits.show {
      max-height: 600px; /* Sufficiently large for all lists */
      opacity: 1;
    }
    .rank-benefits li {
      margin: 6px 0;
      padding-right: 12px;
      font-size: 1rem;
      color: var(--text);
      position: relative;
      text-shadow: 0 0 2px rgba(0,0,0,0.7);
    }
    .rank-benefits li::before {
      content: "\2713"; /* Checkmark unicode */
      color: var(--accent);
      position: absolute;
      right: 0;
      font-weight: 800;
      font-size: 1rem;
      text-shadow: 0 0 4px var(--accent);
    }

    .rank-actions {
      display: flex;
      flex-direction: column;
      gap: 12px;
      width: 100%;
    }

    .btn {
      font-family: 'Vazirmatn', sans-serif;
      font-weight: 700;
      padding: 14px 24px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      text-shadow: 0 0 4px rgba(0,0,0,0.7);
      box-shadow: 0 8px 20px rgba(0,0,0,0.35);
      user-select: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .btn.btn-primary {
      background: var(--primary);
      color: #fff;
      border: 2px solid var(--primary-3);
    }
    .btn.btn-primary:hover {
      background: var(--primary-2);
      box-shadow: 0 0 30px var(--primary-2);
      transform: translateY(-2px);
    }
    .btn.btn-secondary {
      background: var(--accent);
      color: #332d1d;
      border: 2px solid var(--accent-3);
    }
    .btn.btn-secondary:hover {
      background: var(--accent-2);
      color: #000;
      box-shadow: 0 0 30px var(--accent-2);
      transform: translateY(-2px);
    }
    .btn.btn-ghost {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text);
    }
    .btn.btn-ghost:hover {
      border-color: var(--primary);
      box-shadow: 0 0 15px var(--primary);
      background: rgba(30,136,229,0.1);
      transform: translateY(-2px);
    }

    /* ===== استایل‌های فوتر ===== */
    footer {
      background: var(--grad-footer);
      backdrop-filter: blur(10px);
      border-top: 1px solid var(--border);
      box-shadow: var(--shadow);
      padding: 48px 20px 24px;
      text-align: center;
      font-family: 'Vazirmatn', sans-serif;
      user-select: none;
      flex-shrink: 0;
    }
    .footer-inner {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
    }
    .f-brand {
      display: flex;
      align-items: center;
      gap: 12px;
      min-width: 200px;
      font-family: 'Minecraft', sans-serif;
      font-size: 1.6rem;
    }
    .f-brand img {
      width: 50px;
      height: 50px;
      border-radius: 10px;
      border: 2px solid rgba(66,165,245,0.4);
      box-shadow: 0 0 15px rgba(30,136,229,0.6);
      image-rendering: pixelated;
    }
    .f-nav {
      display: flex;
      gap: 18px;
      justify-content: center;
      flex-wrap: wrap;
      flex-grow: 1;
      min-width: 300px;
    }
    .f-nav a {
      font-weight: 700;
      font-size: 1rem;
      padding: 6px 12px;
      border-radius: 12px;
      transition: all 0.3s ease;
      text-shadow: 0 0 3px rgba(0,0,0,0.7);
    }
    .f-nav a:hover {
      color: var(--accent);
      box-shadow: 0 0 10px var(--accent);
      border: 1px solid var(--accent);
    }
    .social {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      min-width: 200px;
    }
    .social a {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      background: rgba(0,0,0,0.7);
      border: 2px solid var(--border);
      color: var(--text);
      font-size: 1.3rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      text-shadow: 0 0 3px rgba(0,0,0,0.8);
    }
    .social a:hover {
      background: var(--primary);
      border-color: var(--accent);
      color: #fff;
      box-shadow: 0 0 15px var(--primary);
      transform: translateY(-4px) scale(1.1);
    }
    .footer-divider {
      width: 60%; /* خط نازک و کوتاه */
      margin: 20px auto; /* فاصله و مرکز قرارگیری */
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    .copy {
      flex-basis: 100%;
      margin-top: 10px;
      font-size: 0.9rem;
      color: var(--muted);
    }
    .copy strong {
      color: var(--accent);
      font-weight: 700;
    }

    /* ===== مدال‌ها و نوتیفیکیشن‌ها ===== */
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(0,0,0,0.7);
      color: var(--text);
      padding: 12px 24px;
      border-radius: 8px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
      border: 1px solid var(--border);
      opacity: 0;
      visibility: hidden;
      transform: translateY(20px);
      transition: all 0.3s ease-in-out;
      z-index: 1000;
    }
    .toast.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    /* مدال برای جزئیات دسترسی‌ها */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      backdrop-filter: blur(3px);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.4s ease;
      z-index: 120;
      direction: rtl;
    }
    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    .modal-content {
      background: url('https://cdn.jsdelivr.net/gh/amir-abdi/personal-assets@main/planks.png');
      background-size: 64px 64px;
      border: 6px solid #4a2d12;
      border-radius: 12px;
      box-shadow: 0 0 30px rgba(0,0,0,0.8);
      max-width: 800px; /* افزایش عرض پنل */
      max-height: 85vh; /* افزایش ارتفاع پنل */
      overflow-y: auto;
      padding: 24px;
      position: relative;
      transform: translateY(50px) scale(0.9);
      opacity: 0;
      transition: all 0.5s cubic-bezier(0.17, 0.67, 0.83, 0.67);
    }
    .modal-overlay.active .modal-content {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 4px solid var(--primary);
      padding-bottom: 12px;
      user-select: none;
    }
    .modal-header h2 {
      font-family: 'Minecraft', sans-serif;
      font-weight: 900;
      font-size: 1.8rem;
      color: var(--accent);
      text-shadow: 2px 2px 0 #000, 0 0 10px var(--accent);
      margin: 0;
    }
    .modal-close {
      background: transparent;
      border: none;
      color: var(--text);
      font-size: 1.8rem;
      cursor: pointer;
      border-radius: 8px;
      padding: 4px 8px;
      user-select: none;
      transition: color 0.3s ease;
    }
    .modal-close:hover {
      color: var(--accent);
      text-shadow: 0 0 10px var(--accent);
    }
    .modal-body {
      margin-top: 20px;
      color: var(--text);
      font-size: 1rem;
      line-height: 1.5;
      user-select: text;
    }
    .modal-title {
      font-family: 'Minecraft', sans-serif;
      font-weight: 900;
      font-size: 1.8rem;
      text-align: center;
      margin-bottom: 16px;
      color: var(--accent);
      text-shadow: 0 0 8px var(--accent);
    }
    .permission-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .permission-category {
      margin-bottom: 18px;
      border-right: 4px solid var(--accent);
      padding-right: 20px; /* اضافه شدن فاصله برای جلوتر کشیدن */
    }
    .permission-category h3 {
      font-family: 'Minecraft', sans-serif;
      font-weight: 900;
      font-size: 1.5rem;
      margin: 0 0 8px;
      color: var(--accent);
      text-shadow: 0 0 6px var(--accent);
      user-select: none;
    }
    .permission-item {
      font-size: 1rem;
      margin: 15px 0; /* افزایش فاصله بین پرمیشن‌ها */
      padding-right: 8px;
      position: relative;
      color: var(--text);
      user-select: text;
    }
    .permission-item::before {
      content: "•"; /* اضافه کردن نقطه بزرگ */
      color: var(--accent);
      position: absolute;
      right: 0;
      font-weight: 900;
      font-size: 1.2rem; /* بزرگ‌تر کردن نقطه */
      text-shadow: 0 0 4px var(--accent);
    }
    .gamemode-title {
      font-family: 'Minecraft', sans-serif;
      font-weight: 900;
      font-size: 1.25rem;
      text-shadow: 2px 2px 0 #000, 0 0 10px var(--accent);
      color: var(--accent);
      margin-bottom: 8px;
    }
    .gamemode-list {
      padding-right: 20px;
    }

    /* Animate Elements on Scroll */
    .hidden {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .visible {
      opacity: 1;
      transform: translateY(0);
    }

    @media (max-width: 768px) {
      .menu-btn { display: block; }
      #nav {
        display: none;
        flex-direction: column;
        background: var(--bg-2);
        position: absolute;
        top: 72px;
        right: 0;
        width: 100%;
        box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        border-bottom-left-radius: 12px;
        border-bottom-right-radius: 12px;
        padding: 16px 0;
        gap: 8px;
      }
      #nav.open { display: flex; }
      .nav-link {
        width: 100%;
        text-align: center;
        padding: 12px;
        font-size: 1.2rem;
      }
      .footer-inner { flex-direction: column; }
      .f-brand, .f-nav, .social { min-width: auto; }
      .f-nav, .social { margin-top: 12px; }
      .ranks-grid { flex-wrap: wrap; }
      .rank-card { width: calc(50% - 16px); min-width: auto; }
    }
    @media (max-width: 480px) {
      .rank-card { width: 100%; }
    }
  </style>
</head>
<body>
  <div id="preloader">
    <img src="https://s5.uupload.ir/files/amirabbas8585/Xrugen/logo.png" alt="X-Rugen Logo" class="loading-logo">
    <div class="loading-spinner"></div>
  </div>

  <div class="particle-bg">
    <canvas id="particleCanvas"></canvas>
  </div>
  <canvas id="cursorCanvas"></canvas>

  <header class="topbar" id="top">
    <div class="topbar-inner">
      <a class="brand" href="https://xrugen.ir" aria-label="X‑Rugen">
        <img src="https://s5.uupload.ir/files/amirabbas8585/Xrugen/logo.png" alt="لوگوی X‑Rugen">
        <span class="name"><span class="x">X</span>-Rugen</span>
      </a>
      <button class="menu-btn" aria-label="باز/بستن منو"><i class="fa-solid fa-bars"></i></button>
      <nav id="nav">
        <a class="nav-link" href="https://www.xrugen.ir/shop/">فروشگاه</a>
        <a class="nav-link" href="https://www.xrugen.ir/punish/">پانیشمنت</a>
        <a class="nav-link" href="https://www.xrugen.ir/rules/">قوانین</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="shop-header hidden" aria-label="معرفی فروشگاه">
      <h1>فروشگاه X-Rugen</h1>
      <p>با خرید رنک‌ها و آیتم‌های جذاب در سرور به پیشرفت خود سرعت دهید.</p>
    </section>
    
    <section class="ranks-container hidden" aria-label="لیست رنک‌ها">
      <div class="ranks-grid">
        <article class="rank-card hero" tabindex="0" aria-labelledby="hero-title hero-price" role="region">
          <div class="rank-icon" aria-hidden="true">
            <img src="https://s15.uupload.ir/files/amirabbas8585/Xrugen/Hero_Rank.png" alt="آیکون رنک Hero" />
          </div>
          <h2 id="hero-title" class="rank-title">Hero</h2>
          <p id="hero-price" class="rank-price">50,000 تومان</p>
          <div class="rank-actions">
            <button class="btn btn-ghost" type="button" data-rank="hero" aria-label="نمایش دسترسی های رنک Hero">دسترسی ها</button>
            <button class="btn btn-primary" type="button" aria-label="خرید رنک Hero">خرید</button>
          </div>
        </article>
  
        <article class="rank-card hellborn" tabindex="0" aria-labelledby="hellborn-title hellborn-price" role="region">
          <div class="rank-icon" aria-hidden="true">
            <img src="https://s5.uupload.ir/files/amirabbas8585/Xrugen/HellBorn_Rank.png" alt="آیکون رنک Hellborn" />
          </div>
          <h2 id="hellborn-title" class="rank-title">Hellborn</h2>
          <p id="hellborn-price" class="rank-price">100,000 تومان</p>
          <div class="rank-actions">
            <button class="btn btn-ghost" type="button" data-rank="hellborn" aria-label="نمایش دسترسی های رنک Hellborn">دسترسی ها</button>
            <button class="btn btn-primary" type="button" aria-label="خرید رنک Hellborn">خرید</button>
          </div>
        </article>
  
        <article class="rank-card empire" tabindex="0" aria-labelledby="empire-title empire-price" role="region">
          <div class="rank-icon" aria-hidden="true">
            <img src="https://s5.uupload.ir/files/amirabbas8585/Xrugen/Empire_Rank.png" alt="آیکون رنک Empire" />
          </div>
          <h2 id="empire-title" class="rank-title">Empire</h2>
          <p id="empire-price" class="rank-price">200,000 تومان</p>
          <div class="rank-actions">
            <button class="btn btn-ghost" type="button" data-rank="empire" aria-label="نمایش دسترسی های رنک Empire">دسترسی ها</button>
            <button class="btn btn-primary" type="button" aria-label="خرید رنک Empire">خرید</button>
          </div>
        </article>
  
        <article class="rank-card champions" tabindex="0" aria-labelledby="champions-title champions-price" role="region">
          <div class="rank-icon" aria-hidden="true">
            <img src="https://s5.uupload.ir/files/amirabbas8585/Xrugen/Champions_Rank.png" alt="آیکون رنک Champions" />
          </div>
          <h2 id="champions-title" class="rank-title">Champions</h2>
          <p id="champions-price" class="rank-price">300,000 تومان</p>
          <div class="rank-actions">
            <button class="btn btn-ghost" type="button" data-rank="champions" aria-label="نمایش دسترسی های رنک Champions">دسترسی ها</button>
            <button class="btn btn-primary" type="button" aria-label="خرید رنک Champions">خرید</button>
          </div>
        </article>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-inner">
      <div class="f-brand">
        <img src="https://s5.uupload.ir/files/amirabbas8585/Xrugen/logo.png" alt="لوگو">
        <div><strong>X‑Rugen</strong><div style="color:var(--muted);font-size:.92rem">MC.XRugen.IR</div></div>
      </div>
      <nav class="f-nav">
        <a href="https://www.xrugen.ir/shop/">فروشگاه</a>
        <a href="https://www.xrugen.ir/punish/">پانیشمنت</a>
        <a href="https://www.xrugen.ir/rules/">قوانین</a>
      </nav>
      <div class="social">
        <a href="https://discord.gg/AJBF5CPmYx" target="_blank" aria-label="Discord"><i class="fa-brands fa-discord"></i></a>
        <a href="https://t.me/X_Rugen" target="_blank" aria-label="Telegram"><i class="fa-brands fa-telegram"></i></a>
        <a href="#" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
      </div>
      <div class="footer-divider"></div>
      <div class="copy">تمامی حقوق برای تیم <strong>X‑Rugen</strong> محفوظ است.</div>
    </div>
  </footer>
  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <div class="modal-overlay" id="rank-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-title"></h2>
        <button class="modal-close" id="close-modal">&times;</button>
      </div>
      <div class="modal-body" id="modal-body">
        </div>
    </div>
  </div>
  
  <div class="modal-overlay" id="purchase-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="purchase-modal-title">مشکل در پرداخت</h2>
        <button class="modal-close" id="close-purchase-modal">&times;</button>
      </div>
      <div class="modal-body" id="purchase-modal-body">
        <p>در حال حاضر درگاه پرداخت در دسترس نمی‌باشد.</p>
        <p>لطفاً جهت خرید، از طریق دیسکورد تیکت دهید و یا به ادمین در تلگرام پیام دهید.</p>
        <p style="margin-top:15px; text-align:center;">
          <strong>آیدی تلگرام:</strong> <a href="https://t.me/XRugen_dev" target="_blank" style="color:var(--accent);">@XRugen_dev</a>
        </p>
        <p style="margin-top:10px; text-align:center;">
          <a href="https://discord.gg/AJBF5CPmYx" target="_blank" class="btn btn-secondary">
            <i class="fa-brands fa-discord"></i> دیسکورد
          </a>
        </p>
      </div>
    </div>
  </div>

  <script>
    // ===== Particles.js from index.html =====
    function hexToRgb(hex) {
      const shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
      hex = hex.replace(shorthandRegex, function(m, r, g, b) {
        return r + r + g + g + b + b;
      });
      const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return result ? { r: parseInt(result[1], 16), g: parseInt(result[2], 16), b: parseInt(result[3], 16) } : null;
    }

    const particleCanvas = document.getElementById('particleCanvas');
    const ctx = particleCanvas.getContext('2d');
    let particles = [];
    const particleCount = 200;
    const maxDistance = 150;
    const colors = ['#e9eef3', '#42a5f5', '#ffb62f'];

    function resizeCanvas() {
      particleCanvas.width = window.innerWidth;
      particleCanvas.height = window.innerHeight;
    }

    class Particle {
      constructor() {
        this.x = Math.random() * particleCanvas.width;
        this.y = Math.random() * particleCanvas.canvasHeight;
        this.vx = (Math.random() - 0.5) * 0.5;
        this.vy = (Math.random() - 0.5) * 0.5;
        this.radius = Math.random() * 1.5 + 0.5;
        this.color = colors[Math.floor(Math.random() * colors.length)];
      }

      update() {
        this.x += this.vx;
        this.y += this.vy;

        if (this.x < 0 || this.x > particleCanvas.width) this.vx *= -1;
        if (this.y < 0 || this.y > particleCanvas.height) this.vy *= -1;
      }

      draw() {
        const rgb = hexToRgb(this.color);
        ctx.fillStyle = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.7)`;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    function initParticles() {
      particles = [];
      for (let i = 0; i < particleCount; i++) {
        particles.push(new Particle());
      }
    }

    function animateParticles() {
      requestAnimationFrame(animateParticles);
      ctx.clearRect(0, 0, particleCanvas.width, particleCanvas.height);

      for (let i = 0; i < particles.length; i++) {
        particles[i].update();
        particles[i].draw();

        for (let j = i + 1; j < particles.length; j++) {
          const dx = particles[i].x - particles[j].x;
          const dy = particles[i].y - particles[j].y;
          const distance = Math.sqrt(dx * dx + dy * dy);

          if (distance < maxDistance) {
            const opacity = 1 - (distance / maxDistance);
            ctx.beginPath();
            ctx.strokeStyle = `rgba(255, 255, 255, ${opacity})`;
            ctx.lineWidth = 0.5;
            ctx.moveTo(particles[i].x, particles[i].y);
            ctx.lineTo(particles[j].x, particles[j].y);
            ctx.stroke();
          }
        }
      }
    }

    window.addEventListener('load', () => {
      resizeCanvas();
      initParticles();
      animateParticles();
      document.getElementById('preloader').classList.add('hide');
    });
    window.addEventListener('resize', resizeCanvas);

    // ===== All other scripts from index.html & custom for shop.html =====
    document.addEventListener('DOMContentLoaded', () => {
      // Handle the mobile menu button
      const menuBtn = document.querySelector('.menu-btn');
      const nav = document.querySelector('#nav');
      menuBtn.addEventListener('click', () => {
        nav.classList.toggle('open');
      });

      // Data for modals
      const rankBenefits = {
        hero: {
          title: 'دسترسی‌های رنک Hero',
          benefits: [
            '<span class="gamemode-title">دسترسی‌های عمومی (All Servers)</span>',
            'استفاده از چت رنگی و فرمت‌شده در چت‌ها',
            'Cosmetic Hats',
            'Cosmetic Banners',
            '<span class="gamemode-title">SMP</span>',
            'قابلیت تنظیم 3 نقطه خانه (SetHome)',
            'Crafting Table',
            'امکان قرار دادن آیتم‌ها روی سر',
            'افزایش ظرفیت فروش در /ah تا 5 آیتم',
            'مشاهده بازیکنان اطراف با /near',
            'دریافت کیت HERO',
            '<span class="gamemode-title">SkyMine</span>',
            'پرواز فقط در جزیره شخصی',
            'قابلیت تنظیم 3 نقطه خانه (SetHome)',
            'امکان قرار دادن آیتم‌ها روی سر',
            'افزایش ظرفیت فروش در /ah تا 5 آیتم',
            'مشاهده بازیکنان اطراف با /near',
            'دریافت کیت HERO'
          ]
        },
        hellborn: {
          title: 'دسترسی‌های رنک Hellborn',
          benefits: [
            '<span class="gamemode-title">دسترسی‌های عمومی (All Servers)</span>',
            'استفاده از چت رنگی و فرمت‌شده',
            'امکان تغییر نام نمایشی با رنگ و فرمت دلخواه',
            'دسترسی به منوی Glow افکت درخشان',
            'Cosmetic Hats',
            'Cosmetic Banners',
            'Cosmetic Emotes',
            'Cosmetic Animated Hats',
            '<span class="gamemode-title">SMP</span>',
            'قابلیت تنظیم 6 نقطه خانه (SetHome)',
            'دسترسی کامل به ابزارهای ویژه:',
            'Crafting Table',
            'Ender Chest',
            'قرار دادن آیتم‌ها روی سر',
            'افزایش ظرفیت فروش در /ah تا 10 آیتم',
            'مشاهده بازیکنان اطراف با /near',
            'پرکردن نوار گرسنگی خود در هر زمان',
            'تبدیل Ingot به Block با یک دستور',
            'دریافت کیت HELLBORN',
            '<span class="gamemode-title">SkyMine</span>',
            'پرواز فقط در جزیره شخصی',
            'قابلیت تنظیم 6 نقطه خانه (SetHome)',
            'Ender Chest',
            'قرار دادن آیتم‌ها روی سر',
            'افزایش ظرفیت فروش در /ah تا 10 آیتم',
            'مشاهده بازیکنان اطراف با /near',
            'تبدیل Ingot به Block',
            'دریافت کیت HELLBORN'
          ]
        },
        empire: {
          title: 'دسترسی‌های رنک Empire',
          benefits: [
            '<span class="gamemode-title">دسترسی‌های عمومی (All Servers)</span>',
            'چت رنگی و فرمت‌شده',
            'تغییر نام نمایشی با رنگ و فرمت دلخواه',
            'منوی Glow (درخشان)',
            'عبور از محدودیت AFK (عدم کیک شدن در حالت Away)',
            'Cosmetic Hats',
            'Cosmetic Banners',
            'Cosmetic Emotes',
            'Cosmetic Animated Hats',
            'Cosmetic Particles',
            'Cosmetic Cloaks',
            'Cosmetic Pets',
            '<span class="gamemode-title">SMP</span>',
            'تنظیم 9 نقطه خانه (SetHome)',
            'دسترسی کامل به ابزارهای کاربردی:',
            'Crafting Table',
            'Ender Chest',
            'Anvil',
            'قرار دادن آیتم روی سر (Wearable Items)',
            'فروش در /ah تا 15 آیتم',
            'دیدن پلیرهای اطراف با /near',
            'پرکردن غذای خود',
            'پرکردن کامل نوار قلب',
            'تبدیل Ingot به Block',
            'حفظ XP پس از مرگ',
            'تعمیر آیتم در دست',
            'دریافت کیت EMPIRE',
            '<span class="gamemode-title">SkyMine</span>',
            'پرواز در جزیره شخصی',
            'تنظیم 9 نقطه خانه (SetHome)',
            'Ender Chest',
            'قرار دادن آیتم روی سر',
            'فروش در /ah تا ۱5 آیتم',
            'دیدن پلیرهای اطراف با /near',
            'پرکردن غذای خود',
            'پر کردن نوار قلب',
            'تبدیل Ingot به Block',
            'تعمیر آیتم در دست',
            'حذف تأخیر در تلپورت',
            'دریافت کیت EMPIRE'
          ]
        },
        champions: {
          title: 'دسترسی‌های رنک Champions',
          benefits: [
            '<span class="gamemode-title">دسترسی‌های عمومی (All Servers)</span>',
            'چت رنگی و فرمت‌شده',
            'تغییر نام نمایشی با رنگ و فرمت دلخواه',
            'منوی Glow (درخشان)',
            'عبور از محدودیت AFK (عدم کیک شدن)',
            'Cosmetic Hats',
            'Cosmetic Banners',
            'Cosmetic Emotes',
            'Cosmetic Animated Hats',
            'Cosmetic Particles',
            'Cosmetic Cloaks',
            'Cosmetic Pets',
            'Cosmetic Suits',
            'Cosmetic Gadgets',
            '<span class="gamemode-title">SMP</span>',
            'تنظیم 12 نقطه خانه (SetHome)',
            'دسترسی کامل به ابزارهای کاربردی:',
            'Crafting Table',
            'Ender Chest',
            'Trash Menu',
            'Anvil',
            'قرار دادن آیتم روی سر',
            'فروش در /ah تا 20 آیتم',
            'دیدن پلیرهای اطراف با /near',
            'پرکردن غذای خود',
            'پرکردن نوار قلب خود',
            'تبدیل Ingot به Block',
            'حفظ XP پس از مرگ',
            'تعمیر آیتم در دست',
            'تعمیر تمام آیتم‌ها',
            'حذف تأخیر در تلپورت',
            'دریافت کیت CHAMPIONS',
            '<span class="gamemode-title">SkyMine</span>',
            'پرواز در جزیره شخصی',
            'نامیرا شدن در جزیره خود (God Mode Island Only)',
            'تنظیم 12 نقطه خانه (SetHome)',
            'Ender Chest',
            'قرار دادن آیتم روی سر',
            'فروش در /ah تا 20 آیتم',
            'دیدن پلیرهای اطراف',
            'پرکردن غذای خود',
            'پر کردن نوار قلب خود',
            'تبدیل Ingot به Block',
            'تعمیر آیتم در دست',
            'تعمیر تمام آیتم‌ها',
            'حذف تأخیر در تلپورت',
            'دریافت کیت CHAMPIONS'
          ]
        }
      };

      // Modal handling for rank details
      const rankModal = document.getElementById('rank-modal');
      const modalTitle = document.getElementById('modal-title');
      const modalBody = document.getElementById('modal-body');
      const closeModalBtn = document.getElementById('close-modal');
      const infoButtons = document.querySelectorAll('.btn-ghost');

      infoButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          const rankId = btn.getAttribute('data-rank');
          const data = rankBenefits[rankId];
          
          if (data) {
            modalTitle.textContent = data.title;
            const ul = document.createElement('ul');
            ul.classList.add('permission-list');
            data.benefits.forEach(benefit => {
              const li = document.createElement('li');
              li.classList.add('permission-item');
              li.innerHTML = benefit;
              ul.appendChild(li);
            });
            modalBody.innerHTML = '';
            modalBody.appendChild(ul);
            rankModal.classList.add('active');
          }
        });
      });

      closeModalBtn.addEventListener('click', () => {
        rankModal.classList.remove('active');
      });

      rankModal.addEventListener('click', (e) => {
        if (e.target.id === 'rank-modal') {
          rankModal.classList.remove('active');
        }
      });

      // Modal handling for purchase buttons
      const purchaseModal = document.getElementById('purchase-modal');
      const closePurchaseModalBtn = document.getElementById('close-purchase-modal');
      const buyButtons = document.querySelectorAll('.btn-primary');

      buyButtons.forEach(btn => {
          btn.addEventListener('click', () => {
              purchaseModal.classList.add('active');
          });
      });

      closePurchaseModalBtn.addEventListener('click', () => {
          purchaseModal.classList.remove('active');
      });

      purchaseModal.addEventListener('click', (e) => {
          if (e.target.id === 'purchase-modal') {
              purchaseModal.classList.remove('active');
          }
      });
      
      // Play click sound on all buttons
      const allButtons = document.querySelectorAll('.btn');
      allButtons.forEach(button => {
          button.addEventListener('click', () => {
              const audio = new Audio('https://cdn.jsdelivr.net/gh/amir-abdi/personal-assets@main/click.mp3');
              audio.volume = 0.3;
              audio.play().catch(() => {});
          });
      });

      // Animate Elements on Scroll (from index.html)
      const hiddenElements = document.querySelectorAll('.hidden');
      const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
              if (entry.isIntersecting) {
                  entry.target.classList.add('visible');
                  observer.unobserve(entry.target);
              }
          });
      }, {
          threshold: 0.2
      });
      hiddenElements.forEach(el => observer.observe(el));
      
      // Cursor Particle Effect
      const cursorCanvas = document.getElementById('cursorCanvas');
      const cursorCtx = cursorCanvas.getContext('2d');
      const cursorParticles = [];
      const particleColors = ['#e9eef3', '#ffb62f', '#42a5f5'];

      function resizeCursorCanvas() {
          cursorCanvas.width = window.innerWidth;
          cursorCanvas.height = window.innerHeight;
      }
      resizeCursorCanvas();
      window.addEventListener('resize', resizeCursorCanvas);

      class CursorParticle {
          constructor(x, y) {
              this.x = x;
              this.y = y;
              this.size = Math.random() * 2 + 1;
              this.alpha = 1;
              this.color = particleColors[Math.floor(Math.random() * particleColors.length)];
              this.vx = (Math.random() - 0.5) * 1.5;
              this.vy = (Math.random() - 0.5) * 1.5;
          }

          update() {
              this.x += this.vx;
              this.y += this.vy;
              this.size *= 0.97;
              this.alpha *= 0.98;
          }

          draw() {
              cursorCtx.globalAlpha = this.alpha;
              cursorCtx.fillStyle = this.color;
              cursorCtx.beginPath();
              cursorCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
              cursorCtx.fill();
          }
      }

      document.addEventListener('mousemove', (e) => {
          cursorParticles.push(new CursorParticle(e.clientX, e.clientY));
      });

      function animateCursorParticles() {
          requestAnimationFrame(animateCursorParticles);
          cursorCtx.clearRect(0, 0, cursorCanvas.width, cursorCanvas.height);
          for (let i = 0; i < cursorParticles.length; i++) {
              cursorParticles[i].update();
              cursorParticles[i].draw();
              if (cursorParticles[i].size < 0.5) {
                  cursorParticles.splice(i, 1);
                  i--;
              }
          }
      }
      animateCursorParticles();
    });
  </script>
</body>
</html>
